<%- include ("../partials/headers")%>
<div class="container my-4">
    <div class="row">
        <div class="col-md-3">
            <p class="lead">KD Camper</p>
            <div class="list-group">
                <li class="list-group-item active">Info 1</li>
                <li class="list-group-item">Info 2</li>
                <li class="list-group-item">Info 3</li>
            </div>
        </div>
        <div class="col-md-9">
            <h3><a href="#"><i class="fas fa-map-marker-alt"></i> <%=foundCamp.name%>, <%=foundCamp.place%></a></h3>
            <div class="img-thumbnail">
                <image class="img-responsive" src="<%=foundCamp.image%>">
                <div class="caption-full">
                    <h4 class="pull-right">â‚¹<%=foundCamp.price%>/night</h4>
                    <h5><i>Uploaded by <%=foundCamp.author.username%></i></h5>

                    <%if(currentUser && foundCamp.author.id.equals(currentUser._id)){%>
                        <a href="/campgrounds/<%=foundCamp._id%>/edit" class="btn btn-warning" >Edit <svg class="bi bi-pencil-square" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"/>
                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z" clip-rule="evenodd"/>
                          </svg></a>
                        <form action="/campgrounds/<%=foundCamp._id%>?_method=DELETE" method="POST" class="d-inline">
                            <button class="btn btn-danger">Delete <svg class="bi bi-trash-fill" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z" clip-rule="evenodd"/>
                              </svg></button>
                        </form>
                    <%}%>
                    
                    <p class="description"><%=foundCamp.description%></p>
                </div>
            </div>
            <div class="well">
                <form method="POST" action="/campgrounds/<%=foundCamp.id%>/comment" autocomplete="off">
                    <div class="form-group">
                        <textarea class="form-control" name="comment[text]" placeholder="your review goes here..." required></textarea>
                    </div>
                    <div class="text-right">
                    <button class="btn btn-success "><svg class="bi bi-chat-dots-fill" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 01-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0zm3 1a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                      </svg> Leave a review</button>
                    </div>
                  </form>

                <p class="display-4">Reviews...</p>
                <%foundCamp.comments.forEach(function(comment){%>
                    <div class="row reviews">
                        <div class="col-md-12">
                            <strong><%=comment.author.username%></strong>
                            <br>
                            <p class="d-inline mr-2"><%=comment.text%></p>
                            <%if(currentUser && comment.author.id.equals(currentUser._id)){%>
                            <a href="/campgrounds/<%=foundCamp._id%>/comment/<%=comment._id%>/edit" class="btn btn-sm btn-outline-warning">Edit <svg class="bi bi-pencil-square" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.502 1.94a.5.5 0 010 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 01.707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 00-.121.196l-.805 2.414a.25.25 0 00.316.316l2.414-.805a.5.5 0 00.196-.12l6.813-6.814z"/>
                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 002.5 15h11a1.5 1.5 0 001.5-1.5v-6a.5.5 0 00-1 0v6a.5.5 0 01-.5.5h-11a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5H9a.5.5 0 000-1H2.5A1.5 1.5 0 001 2.5v11z" clip-rule="evenodd"/>
                              </svg></a>
                            <form action="/campgrounds/<%=foundCamp._id%>/comment/<%=comment._id%>?_method=DELETE" method="POST" class="d-inline">
                                <button class="btn btn-sm btn-outline-danger">Delete <svg class="bi bi-trash-fill" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z" clip-rule="evenodd"/>
                                  </svg></button>
                            </form>
                        <%}%>
                        </div>
                    </div>
                <%});%>
            </div>
        </div>
    </div>
    <br>
    <br>
    </div>
<%- include ("../partials/footers")%>